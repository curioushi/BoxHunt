# BoxHunt - çº¸ç®±å›¾åƒç½‘ç»œçˆ¬è™« & 3Dçº¸ç®±åˆ¶ä½œå·¥å…·

BoxHuntæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¶é›†äº’è”ç½‘ä¸Šçº¸ç®±å›¾åƒçš„ç½‘ç»œçˆ¬è™«å·¥å…·ï¼Œç°åœ¨è¿˜åŒ…å«äº†ä¸€ä¸ªå¼ºå¤§çš„3Dçº¸ç®±åˆ¶ä½œGUIåº”ç”¨ã€‚å®ƒæ”¯æŒå¤šä¸ªå›¾åƒAPIæºï¼Œå…·å¤‡è‡ªåŠ¨å»é‡ã€è´¨é‡æ§åˆ¶å’Œç»“æ„åŒ–å­˜å‚¨åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥å°†2Dçº¸ç®±ç…§ç‰‡è½¬æ¢æˆ3Dæ¨¡å‹ã€‚

## Development

This project requires Python 3.11+ and uses `ruff` for code formatting and linting.

### Setup Development Environment

```bash
# Install development dependencies
uv sync --dev

# Check code quality
uv run ruff check boxhunt/

# Auto-fix issues where possible
uv run ruff check --fix boxhunt/

# Format code
uv run ruff format boxhunt/

# Run the application
uv run boxhunt --help
```

### Code Quality Tools

- **ruff**: Fast Python linter and formatter that replaces black, flake8, isort, and more
- **pytest**: Testing framework (included in dev dependencies)

The project follows PEP 8 style guidelines with a line length of 88 characters.

## ç‰¹æ€§

### ç½‘ç»œçˆ¬è™«åŠŸèƒ½
- ğŸ¯ **å¤šæºæœç´¢**: æ”¯æŒ Pexels API
- ğŸ” **æ™ºèƒ½å…³é”®è¯**: å†…ç½®ä¸­è‹±æ–‡çº¸ç®±ç›¸å…³å…³é”®è¯åº“
- ğŸ–¼ï¸ **è´¨é‡æ§åˆ¶**: è‡ªåŠ¨è¿‡æ»¤å›¾ç‰‡å°ºå¯¸ã€æ ¼å¼å’Œæ–‡ä»¶å¤§å°
- ğŸš« **æ™ºèƒ½å»é‡**: åŸºäºæ„ŸçŸ¥å“ˆå¸Œçš„å›¾åƒå»é‡ç®—æ³•
- ğŸ’¾ **ç»“æ„åŒ–å­˜å‚¨**: CSVå…ƒæ•°æ®ç®¡ç† + æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
- âš¡ **å¼‚æ­¥å¤„ç†**: é«˜æ•ˆçš„å¹¶å‘ä¸‹è½½å’Œå¤„ç†
- ğŸ”„ **æ–­ç‚¹ç»­ä¼ **: æ”¯æŒä¸­æ–­åç»§ç»­çˆ¬å–
- ğŸ“Š **ç»Ÿè®¡åˆ†æ**: è¯¦ç»†çš„æ”¶é›†ç»Ÿè®¡ä¿¡æ¯

### 3Dçº¸ç®±åˆ¶ä½œå·¥å…· (GUI)
- ğŸ¨ **ç›´è§‚ç•Œé¢**: åŸºäºPySide6çš„ç°ä»£åŒ–GUIç•Œé¢
- ğŸ–¼ï¸ **2Då›¾åƒæ ‡æ³¨**: åœ¨çº¸ç®±ç…§ç‰‡ä¸Šæ ‡æ³¨ä¸åŒé¢ï¼ˆæ­£é¢ã€èƒŒé¢ã€ä¾§é¢ç­‰ï¼‰
- âœ‚ï¸ **æ™ºèƒ½è£å‰ª**: å®æ—¶é¢„è§ˆæ ‡æ³¨åŒºåŸŸçš„è£å‰ªæ•ˆæœ
- ğŸ¯ **3Dé¢„è§ˆ**: OpenGLå®æ—¶æ¸²æŸ“3Dçº¸ç®±æ¨¡å‹
- ğŸ“ **å°ºå¯¸è°ƒèŠ‚**: å¯è°ƒèŠ‚çº¸ç®±çš„å®½åº¦ã€é«˜åº¦ã€æ·±åº¦
- ğŸ“ **æ–‡ä»¶ç®¡ç†**: å†…ç½®æ–‡ä»¶æµè§ˆå™¨ï¼Œæ”¯æŒé¡¹ç›®ä¿å­˜/åŠ è½½
- ğŸ“¤ **æ¨¡å‹å¯¼å‡º**: æ”¯æŒå¯¼å‡ºOBJæ ¼å¼çš„3Dæ¨¡å‹
- ğŸ“ **æ—¥å¿—ç³»ç»Ÿ**: å®æ—¶æ˜¾ç¤ºæ“ä½œæ—¥å¿—å’ŒçŠ¶æ€ä¿¡æ¯

## å®‰è£…

### ä½¿ç”¨ uv (æ¨è)

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/BoxHunt.git
cd BoxHunt

# ä½¿ç”¨uvå®‰è£…ä¾èµ–
uv pip install -e .
```

### ä¼ ç»Ÿæ–¹å¼

```bash
pip install -e .
```

## é…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿:
```bash
cp env.example .env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œæ·»åŠ APIå¯†é’¥:
```env
# Pexels API
PEXELS_API_KEY=your_pexels_api_key_here
```

### APIå¯†é’¥è·å–

- **Pexels API**: [Pexels APIé¡µé¢](https://www.pexels.com/api/)

## ä½¿ç”¨æ–¹æ³•

### GUIåº”ç”¨ï¼ˆ3Dçº¸ç®±åˆ¶ä½œå·¥å…·ï¼‰

```bash
# å¯åŠ¨å›¾å½¢ç•Œé¢åº”ç”¨
boxhunt gui
```

GUIåŠŸèƒ½è¯´æ˜ï¼š
- **å·¦ä¸Šè§’**: 2Då›¾åƒæ ‡æ³¨åŒºåŸŸï¼Œæ‹–æ‹½é¼ æ ‡æ ‡æ³¨çº¸ç®±çš„ä¸åŒé¢
- **ä¸­é—´**: æ ‡æ³¨åŒºåŸŸé¢„è§ˆï¼Œæ˜¾ç¤ºè£å‰ªåçš„åŒºåŸŸå›¾åƒ
- **å³ä¸Šè§’**: 3Dçº¸ç®±é¢„è§ˆï¼Œå®æ—¶æ˜¾ç¤º3Dæ¨¡å‹å¹¶æ”¯æŒæ—‹è½¬ã€ç¼©æ”¾
- **å·¦ä¸‹è§’**: æ–‡ä»¶æµè§ˆå™¨ï¼Œç”¨äºé€‰æ‹©å’Œç®¡ç†å›¾åƒæ–‡ä»¶
- **å³ä¸‹è§’**: æ—¥å¿—è¾“å‡ºï¼Œæ˜¾ç¤ºæ“ä½œçŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯

æ“ä½œæµç¨‹ï¼š
1. ä½¿ç”¨æ–‡ä»¶æµè§ˆå™¨é€‰æ‹©çº¸ç®±ç…§ç‰‡
2. åœ¨2Då›¾åƒä¸Šæ‹–æ‹½æ ‡æ³¨çº¸ç®±çš„å„ä¸ªé¢
3. åœ¨3Dé¢„è§ˆåŒºåŸŸè°ƒæ•´çº¸ç®±å°ºå¯¸
4. ä¿å­˜é¡¹ç›®æ–‡ä»¶æˆ–å¯¼å‡º3Dæ¨¡å‹

### CLIå‘½ä»¤ï¼ˆç½‘ç»œçˆ¬è™«ï¼‰

```bash
# æŸ¥çœ‹é…ç½®ä¿¡æ¯
boxhunt config

# æµ‹è¯•APIè¿æ¥
boxhunt test

# å¼€å§‹çˆ¬å– (ä½¿ç”¨æ‰€æœ‰é¢„å®šä¹‰å…³é”®è¯)
boxhunt crawl

# ä½¿ç”¨è‡ªå®šä¹‰å…³é”®è¯çˆ¬å–
boxhunt crawl --keywords "cardboard box,shipping box"

# è®¾ç½®æ¯ä¸ªæºæ¯ä¸ªå…³é”®è¯çš„æœ€å¤§å›¾ç‰‡æ•°
boxhunt crawl --max-images 50

# æ¢å¤ä¸­æ–­çš„çˆ¬å–ä»»åŠ¡
boxhunt resume

# æŸ¥çœ‹æ”¶é›†ç»Ÿè®¡
boxhunt stats

# æ¸…ç†å­¤ç«‹æ–‡ä»¶
boxhunt cleanup

# å¯¼å‡ºå…ƒæ•°æ®
boxhunt export --format json
```

### Python API ä½¿ç”¨

```python
import asyncio
from boxhunt import BoxHuntCrawler

async def main():
    # åˆ›å»ºçˆ¬è™«å®ä¾‹
    crawler = BoxHuntCrawler()
    
    # æµ‹è¯•APIè¿æ¥
    test_results = await crawler.test_apis()
    print(test_results)
    
    # çˆ¬å–å•ä¸ªå…³é”®è¯
    result = await crawler.crawl_single_keyword("cardboard box", max_images_per_source=30)
    print(f"Saved {result['saved_images']} images")
    
    # çˆ¬å–å¤šä¸ªå…³é”®è¯
    results = await crawler.crawl_multiple_keywords(
        keywords=["çº¸ç®±", "ç“¦æ¥çº¸ç®±"], 
        max_images_per_source=20
    )
    
    # è·å–ç»Ÿè®¡ä¿¡æ¯
    stats = crawler.get_statistics()
    print(stats)

if __name__ == "__main__":
    asyncio.run(main())
```

## é¡¹ç›®ç»“æ„

```
BoxHunt/
â”œâ”€â”€ boxhunt/                 # ä¸»è¦æºä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ api_clients.py      # APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ image_processor.py  # å›¾åƒå¤„ç†
â”‚   â”œâ”€â”€ storage.py          # å­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ crawler.py          # ä¸»çˆ¬è™«ç±»
â”‚   â”œâ”€â”€ website_client.py   # ç½‘ç«™çˆ¬å–å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ main.py             # å‘½ä»¤è¡Œå…¥å£
â”‚   â”œâ”€â”€ gui_main.py         # GUIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ gui/                # GUIæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main_window.py  # ä¸»çª—å£
â”‚   â”‚   â”œâ”€â”€ image_annotation.py  # 2Då›¾åƒæ ‡æ³¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ crop_preview.py      # è£å‰ªåŒºåŸŸé¢„è§ˆ
â”‚   â”‚   â”œâ”€â”€ box3d_viewer.py      # 3DæŸ¥çœ‹å™¨
â”‚   â”‚   â”œâ”€â”€ file_browser.py      # æ–‡ä»¶æµè§ˆå™¨
â”‚   â”‚   â”œâ”€â”€ log_widget.py        # æ—¥å¿—æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â””â”€â”€ utils.py             # GUIå·¥å…·å‡½æ•°
â”‚   â””â”€â”€ box3d/              # 3Då¤„ç†æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ generator.py    # 3Dæ¨¡å‹ç”Ÿæˆå™¨
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½• (æŒ‰åŸŸååˆ†ç»„)
â”‚   â”œâ”€â”€ example.com/       # ç‰¹å®šç½‘ç«™çš„æ•°æ®
â”‚   â”‚   â”œâ”€â”€ images/        # è¯¥ç½‘ç«™çš„å›¾ç‰‡
â”‚   â”‚   â””â”€â”€ metadata.csv   # è¯¥ç½‘ç«™çš„å…ƒæ•°æ®
â”‚   â””â”€â”€ another-site.com/  # å¦ä¸€ä¸ªç½‘ç«™çš„æ•°æ®
â”‚       â”œâ”€â”€ images/
â”‚       â””â”€â”€ metadata.csv
â”œâ”€â”€ pyproject.toml         # é¡¹ç›®é…ç½®
â”œâ”€â”€ env.example            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

### å­˜å‚¨ç»“æ„

**æŒ‰åŸŸååˆ†ç›®å½•å­˜å‚¨**: å½“ä½¿ç”¨ `crawl-site` å‘½ä»¤çˆ¬å–ç‰¹å®šç½‘ç«™æ—¶ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šæŒ‰åŸŸååˆ†ç»„å­˜å‚¨ï¼š

- å›¾ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨ `data/{domain_name}/images/` ç›®å½•
- å…ƒæ•°æ®CSVæ–‡ä»¶å­˜å‚¨åœ¨ `data/{domain_name}/metadata.csv`
- æ¯ä¸ªç½‘ç«™çš„æ•°æ®å®Œå…¨ç‹¬ç«‹ï¼Œä¾¿äºç®¡ç†å’Œåˆ†æ

ä¾‹å¦‚ï¼š
```bash
# çˆ¬å–ç¤ºä¾‹ç½‘ç«™
boxhunt crawl-site https://example.com/products

# æ•°æ®å°†å­˜å‚¨åœ¨:
# data/example.com/images/     (å›¾ç‰‡æ–‡ä»¶)
# data/example.com/metadata.csv (å…ƒæ•°æ®)
```

## é…ç½®é€‰é¡¹

### æœç´¢å…³é”®è¯

é»˜è®¤å…³é”®è¯åŒ…æ‹¬:
- **è‹±æ–‡**: cardboard box, corrugated box, carton, shipping box, moving box ç­‰
- **ä¸­æ–‡**: çº¸ç®±, ç“¦æ¥çº¸ç®±, æ¬å®¶ç®±, å¿«é€’ç®±, åŒ…è£…ç®± ç­‰

### å›¾åƒè¿‡æ»¤

- **æœ€å°å°ºå¯¸**: 256Ã—256 åƒç´ 
- **æ”¯æŒæ ¼å¼**: JPG, PNG, WebP
- **æœ€å¤§æ–‡ä»¶**: 10MB
- **è´¨é‡æ§åˆ¶**: è‡ªåŠ¨éªŒè¯å›¾åƒå®Œæ•´æ€§

### æ€§èƒ½è®¾ç½®  

- **å¹¶å‘è¯·æ±‚**: æœ€å¤š3ä¸ªåŒæ—¶è¯·æ±‚
- **è¯·æ±‚é—´éš”**: é»˜è®¤1ç§’
- **é‡è¯•æ¬¡æ•°**: å¤±è´¥åæœ€å¤šé‡è¯•3æ¬¡
- **å»é‡ç®—æ³•**: æ„ŸçŸ¥å“ˆå¸Œ + æ±‰æ˜è·ç¦»

## åˆè§„æ€§è¯´æ˜

æœ¬å·¥å…·éµå¾ªä»¥ä¸‹åˆè§„åŸåˆ™:

1. **APIä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨å®˜æ–¹APIè€Œéç›´æ¥çˆ¬å–ç½‘é¡µ
2. **é€Ÿç‡é™åˆ¶**: å†…ç½®è¯·æ±‚é—´éš”ï¼Œé¿å…å¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›
3. **è®¸å¯éµå®ˆ**: ä»…ä½¿ç”¨æœ‰æ˜ç¡®ä½¿ç”¨è®¸å¯çš„å›¾åƒæº
4. **robots.txt**: å¦‚éœ€ç›´æ¥çˆ¬å–ï¼Œä¼šå…ˆæ£€æŸ¥robots.txt
5. **ç”¨æˆ·ä»£ç†**: ä½¿ç”¨æ ‡è¯†æ˜ç¡®çš„User-Agent

## æ•°æ®æ ¼å¼

### å…ƒæ•°æ® CSV å­—æ®µ

| å­—æ®µ | æè¿° |
|------|------|
| id | å”¯ä¸€æ ‡è¯†ç¬¦ |
| filename | æœ¬åœ°æ–‡ä»¶å |
| url | åŸå§‹å›¾ç‰‡URL |
| source | æ¥æºAPI (pexels) |
| title | å›¾ç‰‡æ ‡é¢˜/æè¿° |
| width | å›¾ç‰‡å®½åº¦ |
| height | å›¾ç‰‡é«˜åº¦ |
| file_size | æ–‡ä»¶å¤§å°(å­—èŠ‚) |
| perceptual_hash | æ„ŸçŸ¥å“ˆå¸Œå€¼ |
| download_time | ä¸‹è½½æ—¶é—´æˆ³ |
| created_at | è®°å½•åˆ›å»ºæ—¶é—´ |
| status | çŠ¶æ€ (downloaded) |

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **No API clients available**
   - æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”åŒ…å«æœ‰æ•ˆAPIå¯†é’¥
   - è¿è¡Œ `boxhunt config` æŸ¥çœ‹APIå¯†é’¥çŠ¶æ€

2. **Images not downloading**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - è¿è¡Œ `boxhunt test` æµ‹è¯•APIè¿æ¥
   - æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `boxhunt.log`

3. **Permission errors**
   - ç¡®ä¿å¯¹ `data/` ç›®å½•æœ‰å†™æƒé™
   - æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

### æ—¥å¿—

åº”ç”¨ä¼šåœ¨ä»¥ä¸‹ä½ç½®è®°å½•æ—¥å¿—:
- æ§åˆ¶å°è¾“å‡º (å®æ—¶)
- `boxhunt.log` æ–‡ä»¶ (æŒä¹…åŒ–)

è®¾ç½®æ—¥å¿—çº§åˆ«:
```bash
boxhunt --log-level DEBUG crawl
```

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ! è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## å…è´£å£°æ˜

- è¯·ç¡®ä¿éµå®ˆç›®æ ‡ç½‘ç«™çš„æœåŠ¡æ¡æ¬¾å’Œ robots.txt
- ä»…ç”¨äºåˆæ³•çš„ç ”ç©¶å’Œä¸ªäººç”¨é€”
- ç”¨æˆ·éœ€è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨æœ¬å·¥å…·çš„è´£ä»»
- è¯·å°Šé‡ç‰ˆæƒï¼Œä»…æ”¶é›†æœ‰é€‚å½“æˆæƒçš„å›¾åƒ